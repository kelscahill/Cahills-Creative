{% set card_grid_base_class = card_grid.base_class|default('c-card-grid') %}

{% if card_grid %}
  <section class="{{ bem_classes(card_grid_base_class, card_grid.element, card_grid.modifiers, card_grid.extra) }} l-wrap l-container u-spacing">
    {% if card_grid.heading or card_grid.dek %}
      <div class="{{ bem_classes(card_grid_base_class, 'header') }}">
        {% if card_grid.heading %}
          {% include "@atoms/text/heading/heading.twig" with {
            "heading": {
              "level": "2",
              "size": "xl",
              "type": "primary",
              "text": card_grid.heading,
              "extra": bem_classes(card_grid_base_class, 'heading')
            }
          } %}
        {% endif %}
        {% if card_grid.dek %}
          {% include "@atoms/text/dek/dek.twig" with {
            "dek": {
              "text": card_grid.dek,
              "extra": [
                bem_classes(card_grid_base_class, 'dek'),
                "l-container--m"
              ]
            }
          } %}
        {% endif %}
      </div>
    {% endif %}
    {% if card_grid.posts %}
      <div class="{{ bem_classes(card_grid_base_class, 'posts') }}" bp="grid 6 4@md 3@lg">
        {% for post in card_grid.posts %}
          {% if post.post_type == "post" %}
            {% include "@molecules/cards/card.twig" with {
            "card": post
          } %}
          {% else %}
            {% include "@molecules/cards/card-product.twig" with {
              "card": post
            } %}
          {% endif %}
        {% endfor %}
      </div>
      {% include "@molecules/navigation/pagination/pagination.twig" with card_grid %}
    {% else %}
      <p>Sorry, there are no posts at this time.</p>
    {% endif %}
  </section>
{% endif %}
